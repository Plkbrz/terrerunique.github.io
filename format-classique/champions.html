<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <!-- Latest compiled and minified CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <link rel="stylesheet" href="../css/common.css">
    <link rel="stylesheet" href="../css/format-classique.css">
    <title>Voyages en Terre Runique</title>
    <link rel="icon" href="../files/images/icon.png">
    <meta name="description" content="Voyages en Terre Runique">
    <meta name="author" content="co-authored by Palkiabraz, KuuroNeko, MisuCookie">
    <meta name="keywords" content="JDR, League of Legends, Voyages en Terre Runique">
</head>
<body>
    <header id="header">
        <a class="nav-link" href="../index.html">
            <img src="../files/images/logo.png" id="logo" alt="Logo de voyages en Terre Runique">
        </a>
        <nav class="navbar navbar-expand-lg navbar-dark" id="sticky-header">
            <div class="container-fluid">
                <a class="nav-logo" href="../index.html">
                    <img src="../files/images/minilogo.png" id="minilogo" height=50 class="invisible" alt="Logo miniature de voyages en Terre Runique">
                    <p id="minilogotext" class="invisible">Voyages en Terre Runique</p>
                </a>
                <div class="borgar-container">
                <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>
            </div>
                    <div class="collapse navbar-collapse navbar-right" id="navbarNav" aria-expanded="false">
                        <ul class="navbar-nav">
                            <li class="nav-item home notcurrent">
                                <a class="nav-link" href="../index.html">ACCUEIL</a>
                            </li>
                            <li class="separator"></li>
                            <li class="nav-item currentpage">
                                <a class="nav-link" href="champions.html">FORMAT CLASSIQUE</a>
                            </li>
                            <li class="nav-item notcurrent">
                                <a class="nav-link" href="../format-libre.html">FORMAT LIBRE</a>
                            </li>
                            <li class="separator"></li>
                            <li class="separator"></li>
                        </ul>
                    </div>
            </div>
        </nav>
    </header>

    <div class="navbar-collapse navbar-right pages-formats fixed-menu" id="navbarNav2">
        <ul class="navbar-nav">
            <li class="nav-title">
                <h1 class="page-title">Format Classique</h1>
            </li>
            <li class="nav-item currentpage">
                <a class="nav-link" href="champions.html">Champions</a>
            </li>
            <li class="nav-item notcurrent">
                <a class="nav-link" href="scenarios.html">Scénarios</a>
            </li>
            <li class="nav-item notcurrent">
                <a class="nav-link" href="ressources.html">Ressources</a>
            </li>
        </ul>
    </div>
    
    <div id="content" class="headernotfixed">
        <p style="text-align: center;">En développement !</p>
        <form class="form-inline d-flex md-form form-sm mt-0" id="search-div">
            <img id="fieldChampIcon" class="search" src="../files/images/magnifying-glass.png">
            <input id="fieldChamp" onkeyup="champ_search()" class="form-control form-control-sm ml-3" type="text" placeholder="Rechercher un champion" aria-label="Search">
            <div class="dropdown" id="dropdownType">
                <button class="btn btn-secondary dropdown-toggle" type="button" id="dropdownFilterTypeButton" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Dégâts</button>
                <div class="dropdown-menu" aria-labelledby="dropdownFilterTypeButton">
                    <div class="form-check radio dropdown-item r-type checked">
                        <input class="form-check-input display-none" type="radio" name="filterType" id="radioTypeAll">
                        <label class="form-check-label" for="radioTypeAll">Tous</label>
                    </div>
                    <div class="form-check radio dropdown-item r-type">
                        <input class="form-check-input display-none" type="radio" name="filterType" id="radioTypeAD">
                        <label class="form-check-label" for="radioTypeAD">AD</label>
                    </div>
                    <div class="form-check radio dropdown-item r-type">
                        <input class="form-check-input display-none" type="radio" name="filterType" id="radioTypeAP">
                        <label class="form-check-label" for="radioTypeAP">AP</label>
                    </div>
                </div>
            </div>
        </form>
        <div id="champion-list"></div>
    </div>

    <footer>
        <p class="footer-text">“Voyages en Terre Runique” a été créé en vertu de la politique juridique Riot Games intitulée “Jargon juridique” relative à l'utilisation d'actifs de Riot Games.</p>
        <p class="footer-text">Riot Games ne soutient ni ne sponsorise ce projet.</p>
    </footer>

    <script>
        // Script pour récupérer les champions depuis l'api champions.json
        $(document).ready(function() {	   
            var index = 0;
                $.getJSON('https://terrerunique.github.io/files/data/champions.json', function(champion) {
                    $.each(champion, function(i, champ) {
                        $('#champion-list').append(
                            '<div id="champion-' + index + '" class="champion type-' + champ.type + '">'+ 
                                '<div class="champion-header">'+
                                    '<img src="' + champ.iconechamp + '" alt="Icone de ' + champ.nomchamp + '" class="champion-icone">'+
                                    '<h2 class="champion-name champ-search">' + champ.nomchamp + '&nbsp;'+
                                        '<img class="type-img" src="../files/images/' + champ.type + '.png" height="24" title="Dégâts ' + champ.type + '"></h2>'+
                                '</div>'+
                                '<div class="champion-content">'+
                                    '<div class="champion-spell">'+
                                        '<div class="champion-spell-header">'+
                                            '<img src="' + champ.iconesort1 + '" alt="Icone du sort ' + champ.nomsort1 + '" class="champion-spell-icone">'+
                                            '<h3 class="champion-spell-nom">' + champ.nomsort1 + '</h3>'+
                                        '</div>'+
                                        '<p class="champion-spell-desc">' + champ.descsort1 + '</p>'+
                                    '</div>'+
                                    '<div class="champion-spell">'+
                                        '<div class="champion-spell-header">'+
                                            '<img src="' + champ.iconesort2 + '" alt="Icone du sort ' + champ.nomsort2 + '" class="champion-spell-icone">'+
                                            '<h3 class="champion-spell-nom">' + champ.nomsort2 + '</h3>'+
                                        '</div>'+
                                        '<p class="champion-spell-desc">' + champ.descsort2 + '</p>'+
                                    '</div>'+
                                '</div>'+
                            '</div>');
                        index++;
                    });
                });
            });
    </script>
    <script>
        // Fonction qui permet de rechercher un champion dans la liste
        function champ_search() {
            var text;
            var filter = $('#fieldChamp').val().toUpperCase(); // Recherche par nom
            var filtreType = "type-" + $('.r-type.checked label').text(); // Récupère le filtre par type
            for (var i = 0; i < $('.champion').length; i++) {
                text = "";
                $('#champion-' + i + ' .champ-search').each(function() {
                    text+= $(this).text() + " ";
                });
                if (text.toUpperCase().indexOf(filter) > -1) {
                    // Filtre nom
                    if (filtreType == "type-Tous") {
                        $('#champion-' + i).show();
                    } else {
                        // Filtre type
                        if($('#champion-' + i).hasClass(filtreType)) {
                            $('#champion-' + i).show();
                        } else {
                            $('#champion-' + i).hide();
                        }
                    }
                } else {
                    $('#champion-' + i).hide();
                }
            }
        }

        // Fonction qui permet de filtrer les champions par type
        $(function() {
            $(".r-type").click(function() {
                $(".r-type").removeClass("checked");
                $(this).addClass("checked");
                if ($('.r-type.checked label').text() == "Tous") {
                    $('#dropdownType button').text("Dégâts");
                } else {
                    $('#dropdownType button').text($(this).text());
                }
                event.stopPropagation(); // Empèche le dropdown de se fermer en cliquant
                champ_search();
            });
        });
    </script>
    <script>
        // Fonction qui gère l'affichage du champ de recherche
        $('#fieldChamp').focus(function() {
            $('#fieldChampIcon').addClass('focused');
        }).
        blur(function() {
            $('#fieldChampIcon').removeClass('focused');
        });
    </script>
    <script src="../js/stickynavbar.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.10.2/dist/umd/popper.min.js" integrity="sha384-7+zCNj/IqJ95wo16oMtfsKbZ9ccEh31eOz1HGyDuCQ6wgnyJNSYdrPa03rtR1zdB" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>
</body>
</html>